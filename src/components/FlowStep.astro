---
// Flow step with enhanced visibility and cleaner design
export interface Props {
  icon: string;
  text: string;
  isLast?: boolean;
  stepNumber?: number;
}

const { icon, text, isLast = false, stepNumber } = Astro.props;
---
<div class="w-full flex flex-col lg:flex-row items-center group">
  <!-- Completely redesigned step card for maximum visibility -->
  <div class="w-full lg:flex-1 relative 
    bg-white/5 hover:bg-white/10
    border-2 border-cyan-400/50 hover:border-cyan-300/80
    rounded-2xl shadow-2xl hover:shadow-cyan-400/20
    transition-all duration-300 hover:scale-[1.02]
    p-8 lg:p-12 text-center
    min-h-[200px] lg:min-h-[240px]
    backdrop-blur-sm">
    
    <!-- Step number badge - highly visible -->
    {stepNumber && (
      <div class="absolute -top-4 -right-4 
        w-12 h-12 
        bg-gradient-to-br from-cyan-400 to-blue-500 
        rounded-full flex items-center justify-center 
        text-white font-black text-lg
        shadow-2xl border-4 border-slate-900
        z-20">
        {stepNumber}
      </div>
    )}
    
    <!-- Large, visible icon -->
    <div class="mb-6">
      <div class="text-6xl lg:text-8xl mb-4 
        filter drop-shadow-[0_0_20px_rgba(6,182,212,0.6)]
        group-hover:scale-110 transition-transform duration-300">
        {icon}
      </div>
    </div>
    
    <!-- High contrast text -->
    <div>
      <h3 class="text-xl lg:text-3xl font-black text-white 
        mb-4 leading-tight
        group-hover:text-cyan-200 transition-colors duration-300" 
        data-lang-key={text}>
      </h3>
      
      <!-- Visible underline -->
      <div class="w-20 lg:w-28 h-1 bg-gradient-to-r from-cyan-400 to-blue-500 
        mx-auto rounded-full shadow-lg shadow-cyan-400/50">
      </div>
    </div>
    
    <!-- Corner indicators for tech feel -->
    <div class="absolute top-4 left-4 w-3 h-3 bg-cyan-400 rounded-full opacity-60"></div>
    <div class="absolute bottom-4 right-4 w-2 h-2 bg-purple-400 rounded-full opacity-40"></div>
  </div>
  
  <!-- Arrow connector - aligned properly -->
  {!isLast && (
    <div class="my-6 lg:my-0 lg:mx-6 flex items-center justify-center lg:flex-shrink-0">
      <!-- Mobile: vertical arrow -->
      <div class="lg:hidden">
        <svg class="w-6 h-8 text-cyan-400" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L11 6.414V16a1 1 0 11-2 0V6.414L7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3z" clip-rule="evenodd" transform="rotate(180 10 10)" />
        </svg>
      </div>
      <!-- Desktop: horizontal arrow -->
      <div class="hidden lg:block">
        <svg class="w-8 h-6 text-cyan-400" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L11 6.414V16a1 1 0 11-2 0V6.414L7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3z" clip-rule="evenodd" transform="rotate(90 10 10)" />
        </svg>
      </div>
    </div>
  )}
</div>